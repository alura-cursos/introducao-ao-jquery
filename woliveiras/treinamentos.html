<!doctype html>
<html lang="pt">
<head>
	<meta charset="UTF-8">
	<title>Introdução ao jQuery</title>
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/estilos.css">
</head>
<body class="container">

<h1>Treinamentos</h1>

<input id="botao-atualiza" type="button" value="atualizar lista">

<ul id="lista">
	<li>Lógica de Programação</li>
	<li>Dando os primeiros passos na web com HTML e CSS</li>
	<li>Banco de dados e SQL</li>
	<li>Ruby on Rails: do zero com deploy</li>
	<li>NodeJS e Socket I/O</li>
	<li>Vraptor: web fácil e rápida</li>
	<li>Git: trabalhe em equipe com controle e segurança</li>
	<li>Primeiros passos com Java</li>
</ul>

<label>Novo treinamento:</label>
<input id="treinamento">
<input id="botao-adiciona" type="button" value="adicionar"/>

<script src="js/jquery.js"></script>
<script>
	//Função antiga, só exibe o alert
	// $('#lista').on('click', 'li', function(){
	// 	var texto = $(this).text();

	// 	alert(texto);
	// });

	$('#lista').on('dblclick', 'li', function(){
		$(this).animate({ 'margin-left':'+=100' }, function(){
			$(this).remove();
		});
	});

	$('#botao-adiciona').click(function(){
		var treinamento = $('#treinamento');
      	var texto = treinamento.val();

     	treinamento.val('');
     	$('<li>').text(texto).css({ 
     		'background' : '#ccc', 'opacity':'0.1' 
     	}).appendTo('#lista').animate({
     		opacity: 1}, 1000, "linear");
     });

	// $('#botao-atualiza').click(function(){
	// 	$.ajax({ 
 //        url : 'http://mirrorfashion.caelum.com.br/treinamentos',
 //        dataType: 'jsonp', //jsonp é mais seguro e permite requisições de servidores diferentes
 //        success: function(retorno) {
 //              $.each(retorno.treinamentos, function() {
 //                    var treinamento = this;
 //                    //alert(treinamento.nome);
 //                   $('<li>').css('color', 'green').text(treinamento.nome).appendTo('#lista');
 //              });
 //        }
 //    });
	// });

	$('#botao-atualiza').click(function() {
	    $.get('http://mirrorfashion.caelum.com.br/treinamentos', function(retorno) {
	        $.each(retorno.treinamentos, function() {
	            var treinamento = this;
	            $('<li>').css('color', 'green').text(treinamento.nome).appendTo('#lista');
	        });
	     } , 'jsonp');
	});
</script>
</body>
</html>